(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},zUnb:function(t,e,n){"use strict";n.r(e);var o=n("fXoL"),r=n("jhN1"),i=n("3Pt+"),a=n("tk/3"),c=n("tyNb"),s=n("LRne"),l=n("vkgz"),d=n("lJxs"),b=n("JIr8");let g=(()=>{class t{constructor(){this.messages=[]}add(t){this.messages.push(t)}clear(){this.messages=[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=n("wPw+");let p=(()=>{class t{constructor(t,e,n){this.http=t,this.messageService=e,this.toast=n,this.marvelAPI={ts:"1",publicKey:"ce160eefcb9aebd904aebc4b26834292",privateKey:"b6514e52a26973fc538d9a33f3c1bb65f17e3c28",hash:"f68daa7ad9dd734af8ebffd116a2c18d"},this.marvelAPIBaseURL="https://gateway.marvel.com/v1/public/characters",this.marvelAPIQueryParams=`ts=${this.marvelAPI.ts}&apikey=${this.marvelAPI.publicKey}&hash=${this.marvelAPI.hash}`,this.httpOptions={headers:new a.c({"Content-Type":"application/json"})}}addHeroesToLocalStorage(t){return t&&localStorage.setItem("localHeroes",JSON.stringify(t)),Object(s.a)(t)}tryGetHeroesFromLocalStorage(){const t=localStorage.getItem("localHeroes");return t&&t.length?JSON.parse(t):null}getHeroes(){return this.http.get(`${this.marvelAPIBaseURL}?limit=100&${this.marvelAPIQueryParams}`).pipe(Object(l.a)(t=>this.log("fetched heroes")),Object(d.a)(t=>t.data.results),Object(b.a)(this.handleError("getHeroes",[])))}getHero(t){return this.http.get(`${this.marvelAPIBaseURL}/${t}?${this.marvelAPIQueryParams}`).pipe(Object(l.a)(e=>this.log("Ok"===e.status&&e.data.results.length?`fetched heroes with id="${t}"`:`no heroes matching id "${t}" could be found`)),Object(d.a)(t=>t?t.data.results[0]:null),Object(b.a)(this.handleError(`getHero from API with id=${t}`)))}tryGetHeroLocally(t){const e=this.tryGetHeroesFromLocalStorage();if(e)return this.findHeroById(t,e);this.getHeroes().subscribe(e=>(this.addHeroesToLocalStorage(e),this.findHeroById(t,e)))}findHeroById(t,e){return e.find(e=>e.id===t)}log(t){this.messageService.add(`HeroService: ${t}`)}handleError(t="operation",e){return n=>(console.error(n),this.log(`${t} failed: ${n&&n.error?n.error.status:n.message}`),Object(s.a)(e))}updateHero(t){return this.http.put(`${this.marvelAPIBaseURL}?${this.marvelAPIQueryParams}`,t,this.httpOptions).pipe(Object(l.a)(e=>this.log(`updated hero id=${t.id}`)),Object(b.a)(this.handleError("updateHero")))}updateLocalHero(t){const e=this.tryGetHeroesFromLocalStorage();e?this.updateHeroName(t,e):this.getHeroes().subscribe(n=>{this.addHeroesToLocalStorage(e),this.updateHeroName(t,n)})}updateHeroName(t,e){const n=e.find(e=>e.id===t.id);n?n.nickname!==t.nickname?(n.nickname=t.nickname,this.addHeroesToLocalStorage(e),this.toast.create("Your changes have been saved!")):this.toast.create("You have not made any changes!"):this.toast.create("This name cannot be changed!")}addHero(t){return this.http.post(`${this.marvelAPIBaseURL}?${this.marvelAPIQueryParams}`,t,this.httpOptions).pipe(Object(l.a)(t=>this.log(`added hero w/ id=${t.id}`)),Object(b.a)(this.handleError("addHero")))}deleteHero(t){const e="number"==typeof t?t:t.id;return this.http.delete(`${this.marvelAPIBaseURL}/${e}?${this.marvelAPIQueryParams}`,this.httpOptions).pipe(Object(l.a)(t=>this.log(`deleted hero id=${e}`)),Object(b.a)(this.handleError("deleteHero")))}searchHeroes(t){return t.trim()?this.http.get(`${this.marvelAPIBaseURL}?nameStartsWith=${t}&${this.marvelAPIQueryParams}`).pipe(Object(l.a)(e=>this.log("Ok"===e.status&&e.data.results.length?`Found heroes matching "${t}"`:`No heroes matching "${t}"`)),Object(d.a)(t=>t.data.results),Object(b.a)(this.handleError("searchHeroes",[]))):Object(s.a)([])}searchLocalHeroes(t){const e=this.tryGetHeroesFromLocalStorage();if(!e)return this.searchHeroes(t);const n=e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()));return this.log(n.length?`Found heroes matching "${t}"`:`no heroes matching "${t}"`),Object(s.a)(n)}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(a.a),o.Xb(g),o.Xb(h.a))},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=n("mrSG"),m=n("HfoF"),f=n("WffJ"),O=n("JX91"),C=n("PhVf"),_=n("xqAn");const x=["sortable"],P=["heroesTable"],v=["pagination"];function M(t,e){1&t&&(o.Tb(0,"dt-header-cell",20),o.Ac(1,"Name"),o.Sb())}function S(t,e){if(1&t){const t=o.Ub();o.Tb(0,"dt-cell",21),o.bc("click",(function(){o.sc(t);const n=e.$implicit;return o.ec().navigateToDetails(n.id)})),o.Ac(1),o.Sb()}if(2&t){const t=e.$implicit;o.Cb(1),o.Cc("",t.name," ")}}function y(t,e){1&t&&(o.Tb(0,"dt-header-cell",20),o.Ac(1,"Nickname"),o.Sb())}function w(t,e){if(1&t){const t=o.Ub();o.Tb(0,"dt-cell",21),o.bc("click",(function(){o.sc(t);const n=e.$implicit;return o.ec().navigateToDetails(n.id)})),o.Ac(1),o.Sb()}if(2&t){const t=e.$implicit;o.Cb(1),o.Cc("",t.nickname," ")}}function k(t,e){1&t&&(o.Tb(0,"dt-header-cell",20),o.Ac(1,"ID"),o.Sb())}function T(t,e){if(1&t){const t=o.Ub();o.Tb(0,"dt-cell",21),o.bc("click",(function(){o.sc(t);const n=e.$implicit;return o.ec().navigateToDetails(n.id)})),o.Ac(1),o.Sb()}if(2&t){const t=e.$implicit;o.Cb(1),o.Bc(t.id)}}function H(t,e){1&t&&o.Ob(0,"dt-header-cell")}function A(t,e){if(1&t){const t=o.Ub();o.Tb(0,"dt-cell"),o.Tb(1,"span",22),o.bc("click",(function(){o.sc(t);const n=e.$implicit;return o.ec().deleteHero(n.id)})),o.Ob(2,"span"),o.Ob(3,"i"),o.Sb(),o.Sb()}}function j(t,e){1&t&&o.Ob(0,"dt-header-row")}function I(t,e){1&t&&o.Ob(0,"dt-row")}const $=function(){return["id","name","nickname","delete"]};let L=(()=>{class t{constructor(t,e){this.heroService=t,this.router=e,this.searchValue=""}ngOnInit(){const t=this.heroService.tryGetHeroesFromLocalStorage();t?(this.data=t.map(t=>Object(u.a)(t,["stories","description","comics","series","events","modified","urls","thumbnail"])),this.dataSource=new f.m(this.data)):this.heroService.getHeroes().subscribe(t=>this.onGetHeroes(t))}add(t){if(!(t=t.trim()))return void(this.emptyNameAttempt=!0);this.emptyNameAttempt=!1;const e=this.heroService.tryGetHeroesFromLocalStorage(),n=Math.max.apply(null,e.map(t=>t.id))+1;e&&e.push({name:t,id:n,series:{},stories:{},nickname:t,thumbnail:{path:"https://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available",extension:"jpg"}}),this.heroService.addHeroesToLocalStorage(e).subscribe(t=>this.updateDataSource(t,!0))}updateDataSource(t,e=!1,n=!1){const o=t.map(t=>Object(u.a)(t,["stories","description","comics","series","events","modified","urls","thumbnail"]));this.data=o,this.dataSource=new f.m(o),this.dataSource.sort=this.sortable,this.dataSource.search=this.tableSearch,this.dataSource.pagination=e?this.paginationList.last:this.paginationList.first,e&&(this.pagination.currentPage=this.pagination.numberOfPages),n&&this.paginationChanges()}onGetHeroes(t){t.map(t=>t.nickname=t.name),this.data=t,this.heroService.addHeroesToLocalStorage(t).subscribe(t=>this.updateDataSource(t,!1,!0))}ngAfterViewInit(){this.dataSource&&(this.dataSource.sort=this.sortable,this.dataSource.search=this.tableSearch,this.paginationChanges())}paginationChanges(){this.paginationList.changes.pipe(Object(O.a)(null)).subscribe(()=>{this.paginationList.first?(this.dataSource.pagination=this.paginationList.first,this.dataSource.pageSize=20):this.dataSource.pagination=null})}deleteHero(t){let e=this.heroService.tryGetHeroesFromLocalStorage();e=e.filter(e=>e.id!==t),this.heroService.addHeroesToLocalStorage(e).subscribe(t=>this.updateDataSource(t))}navigateToDetails(t){this.router.navigate(["/detail/",t])}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(p),o.Nb(c.b))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-dynamic-table"]],viewQuery:function(t,e){var n;1&t&&(o.wc(f.o,!0),o.wc(x,!0,f.j),o.Ec(P,!0),o.Ec(v,!0),o.Ec(m.a,!0)),2&t&&(o.pc(n=o.cc())&&(e.tableSearch=n.first),o.pc(n=o.cc())&&(e.sortable=n.first),o.pc(n=o.cc())&&(e.heroesTable=n.first),o.pc(n=o.cc())&&(e.pagination=n.first),o.pc(n=o.cc())&&(e.paginationList=n))},decls:28,vars:8,consts:[[1,"flex"],["type","text","dtInput","","placeholder","Please enter hero name",1,"hero_input"],["heroName",""],[1,"inline-flex","button-item",3,"click"],[1,"add-icon"],["name","plus-add"],["name","tableSearch","placeholder","Search table data...","aria-label","Search table data",3,"ngModel","ngModelChange"],["interactiveRows","","dtSort","",1,"heroes",3,"dataSource"],["sortable","","heroesTable",""],["dtColumnDef","name"],["dt-sort-header","",4,"dtHeaderCellDef"],[3,"click",4,"dtCellDef"],["dtColumnDef","nickname"],["dtColumnDef","id"],["dtColumnDef","delete"],[4,"dtHeaderCellDef"],[4,"dtCellDef"],[4,"dtHeaderRowDef"],[4,"dtRowDef","dtRowDefColumns"],["pagination",""],["dt-sort-header",""],[3,"click"],[1,"trash",3,"click"]],template:function(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",0),o.Ob(1,"input",1,2),o.Tb(3,"button",3),o.bc("click",(function(){o.sc(t);const n=o.qc(2);return e.add(n.value),n.value=""})),o.Tb(4,"span",4),o.Ob(5,"dt-icon",5),o.Sb(),o.Ac(6," Add "),o.Sb(),o.Sb(),o.Rb(7),o.Tb(8,"dt-table-search",6),o.bc("ngModelChange",(function(t){return e.searchValue=t})),o.Sb(),o.Tb(9,"dt-table",7,8),o.Rb(12,9),o.yc(13,M,2,0,"dt-header-cell",10),o.yc(14,S,2,1,"dt-cell",11),o.Qb(),o.Rb(15,12),o.yc(16,y,2,0,"dt-header-cell",10),o.yc(17,w,2,1,"dt-cell",11),o.Qb(),o.Rb(18,13),o.yc(19,k,2,0,"dt-header-cell",10),o.yc(20,T,2,1,"dt-cell",11),o.Qb(),o.Rb(21,14),o.yc(22,H,1,0,"dt-header-cell",15),o.yc(23,A,4,0,"dt-cell",16),o.Qb(),o.yc(24,j,1,0,"dt-header-row",17),o.yc(25,I,1,0,"dt-row",18),o.Sb(),o.Ob(26,"dt-pagination",null,19),o.Qb()}2&t&&(o.Cb(1),o.Eb("empty",e.emptyNameAttempt),o.Cb(7),o.jc("ngModel",e.searchValue),o.Cb(1),o.jc("dataSource",e.dataSource),o.Cb(15),o.jc("dtHeaderRowDef",o.mc(6,$)),o.Cb(1),o.jc("dtRowDefColumns",o.mc(7,$)))},directives:[C.a,_.a,f.o,i.e,i.g,f.l,f.j,f.c,f.e,f.b,f.g,f.i,m.a,f.d,f.k,f.a,f.f,f.h],styles:['dt-table-search[_ngcontent-%COMP%]{margin:10px 0}.heroes_container[_ngcontent-%COMP%]{margin:0 10px}.hero_input[_ngcontent-%COMP%]{margin-right:10px}.hero_input[_ngcontent-%COMP%], .inline-flex[_ngcontent-%COMP%]{display:inline-flex}.flex[_ngcontent-%COMP%]{display:flex}button[_ngcontent-%COMP%]{background-color:#eee;border:none;border-radius:4px;cursor:pointer;cursor:hand}button[_ngcontent-%COMP%]:hover{background-color:#cfd8dc}button.delete[_ngcontent-%COMP%]{background-color:grey;color:#fff;padding:4px 10px;float:right}button.delete[_ngcontent-%COMP%]:hover{background-color:#9c5061}.inline[_ngcontent-%COMP%]{width:100%;display:inline-block}.inline[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:75%;display:inline-block;margin-right:10px}.heroes_container[_ngcontent-%COMP%]{border-top:3px solid #c7bb63;border-radius:8px;box-shadow:0 2px 4px 0 rgba(14,30,37,.12);padding:20px;border-bottom:1px solid rgba(14,30,37,.12);background:#fff}.scroll[_ngcontent-%COMP%]{transform:rotate(0);z-index:20;width:40px;height:40px;position:fixed;bottom:20px;right:20px;fill:#00a1b2;transition:transform .35s ease-in-out;transition-delay:1s;cursor:pointer}.scrolltop[_ngcontent-%COMP%]{transform:rotate(180deg)}@media (max-width:440px){.scroll[_ngcontent-%COMP%]{background:hsla(0,0%,87.8%,.72);border:1px solid rgba(69,70,70,.15)}.heroes[_ngcontent-%COMP%]{width:100%}.heroes[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px}.flex[_ngcontent-%COMP%]   .add-icon[_ngcontent-%COMP%]{width:40px}}.add-icon[_ngcontent-%COMP%], .delete-icon[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;margin-right:4px;margin-top:5px;vertical-align:top}.add-icon[_ngcontent-%COMP%]{fill:#fff}.delete-icon[_ngcontent-%COMP%]{fill:#00a1b2}.delete-icon[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.button-item[_ngcontent-%COMP%]{background:#00a1b2;border-color:#00a1b2;color:#fff}.button-item[_ngcontent-%COMP%]:hover{background:#00848e;border-color:#00848e}dt-row[_ngcontent-%COMP%]:hover{cursor:pointer}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Titillium Web,sans-serif;font-size:23px;line-height:42px;font-weight:100;text-align:center;height:100%}section[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center}.trash[_ngcontent-%COMP%]{background:#00a1b2;width:16.5px;height:15px;display:inline-block;margin:9px auto 0;position:relative;-webkit-border-bottom-right-radius:3px;-webkit-border-bottom-left-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.trash[_ngcontent-%COMP%]:after{position:absolute;left:-24.5px;right:0;bottom:-12.5px;width:75px}.trash[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:3px;top:-4.5px;left:-2.5px;right:-2.5px}.trash[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .trash[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{position:absolute;background:#00a1b2;border-top-left-radius:5px;border-top-right-radius:5px;transform:rotate(0deg);transition:transform .25s;transform-origin:19% 100%}.trash[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"";width:6.5px;height:1.75px;top:-2.5px;left:6.75px}.trash[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;width:1.75px;height:12.5px;background:#fff;display:block;margin:3.5px auto;border-radius:2.5px}.trash[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:after{left:-4.5px}.trash[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:after, .trash[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:before{content:"";width:1.75px;height:12.5px;background:#fff;position:absolute;border-radius:2.5px}.trash[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:before{right:-4.5px}.trash[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{transform:rotate(-45deg);transition:transform .25s}.empty[_ngcontent-%COMP%]{border:1px solid red}']}),t})();const F=["heroesContainer"];let N=(()=>{class t{constructor(t){this.heroService=t,this.isTop=!0}handleScroll(){this.isTop=window.pageYOffset<=window.innerHeight/3}ngOnInit(){this.heroService.tryGetHeroesFromLocalStorage()||this.getHeroes()}getHeroes(){this.heroService.getHeroes().subscribe(t=>{t.map(t=>t.nickname=t.name),this.heroService.addHeroesToLocalStorage(t)})}scrollToBottom(){window.scroll({top:this.heroesContainer.nativeElement.scrollHeight,left:0,behavior:"smooth"}),this.isTop=!1}scrollToTop(){window.scroll({top:0,left:0,behavior:"smooth"}),this.isTop=!0}toggleScroll(){this.isTop?this.scrollToBottom():this.scrollToTop()}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(p))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-heroes"]],viewQuery:function(t,e){var n;1&t&&o.Ec(F,!0),2&t&&o.pc(n=o.cc())&&(e.heroesContainer=n.first)},hostBindings:function(t,e){1&t&&o.bc("scroll",(function(t){return e.handleScroll(t)}),!1,o.rc)},decls:7,vars:2,consts:[[1,"heroes_container"],["heroesContainer",""],["name","dropdownopen",1,"scroll",3,"click"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"h2"),o.Ac(2,"Heroes"),o.Sb(),o.Tb(3,"div",null,1),o.Ob(5,"app-dynamic-table"),o.Sb(),o.Tb(6,"dt-icon",2),o.bc("click",(function(){return e.toggleScroll()})),o.Sb(),o.Sb()),2&t&&(o.Cb(6),o.Eb("scrolltop",!e.isTop))},directives:[L,_.a],styles:[".heroes_container[_ngcontent-%COMP%]{margin:0 10px;border-top:3px solid #c7bb63;border-radius:8px;box-shadow:0 2px 4px 0 rgba(14,30,37,.12);padding:20px;border-bottom:1px solid rgba(14,30,37,.12);background:#fff}.scroll[_ngcontent-%COMP%]{transform:rotate(0);z-index:20;width:40px;height:40px;position:fixed;bottom:20px;right:20px;fill:#00a1b2;transition:transform .35s ease-in-out;transition-delay:1s;cursor:pointer}.scrolltop[_ngcontent-%COMP%]{transform:rotate(180deg)}@media (max-width:440px){.scroll[_ngcontent-%COMP%]{background:hsla(0,0%,87.8%,.72);border:1px solid rgba(69,70,70,.15)}}"]}),t})();var R=n("ofXK"),D=n("XNiG"),B=n("Kj3r"),z=n("/uUt"),U=n("eIep"),E=n("EDUn");function G(t,e){if(1&t&&(o.Tb(0,"li"),o.Tb(1,"a",5),o.Ac(2),o.Sb(),o.Sb()),2&t){const t=e.$implicit;o.Cb(1),o.lc("routerLink","/detail/",t.id,""),o.Cb(1),o.Cc(" ",t.name," ")}}let Q=(()=>{class t{constructor(t){this.heroService=t,this.searchTerms=new D.a}search(t){this.searchTerms.next(t)}ngOnInit(){this.heroes$=this.searchTerms.pipe(Object(B.a)(300),Object(z.a)(),Object(U.a)(t=>this.heroService.searchLocalHeroes(t)))}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(p))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-hero-search"]],decls:9,vars:3,consts:[["for","search-box"],["dtInput","","id","search-box",3,"input"],["searchBox",""],[1,"search-result"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,e){if(1&t){const t=o.Ub();o.Tb(0,"dt-card"),o.Tb(1,"dt-card-title"),o.Tb(2,"label",0),o.Ac(3,"Search for hero"),o.Sb(),o.Sb(),o.Tb(4,"input",1,2),o.bc("input",(function(){o.sc(t);const n=o.qc(5);return e.search(n.value)})),o.Sb(),o.Tb(6,"ul",3),o.yc(7,G,3,2,"li",4),o.fc(8,"async"),o.Sb(),o.Sb()}2&t&&(o.Cb(7),o.jc("ngForOf",o.gc(8,1,e.heroes$)))},directives:[E.a,E.c,C.a,R.j,c.e],pipes:[R.b],styles:["h3[_ngcontent-%COMP%]{margin-bottom:5px}label[_ngcontent-%COMP%]{font-size:14px}.search-result[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:1px solid grey;border-left:1px solid grey;border-right:1px solid grey;width:208px;height:20px;padding:5px;background-color:#fff;cursor:pointer;list-style-type:none}.search-result[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#00848e}.search-result[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#888;display:block;text-decoration:none}.search-result[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .search-result[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}#search-box[_ngcontent-%COMP%]{max-width:220px;height:20px}ul.search-result[_ngcontent-%COMP%]{margin-top:0;padding-left:0}.dt-card[_ngcontent-%COMP%]{border-top:3px solid #c7bb63;border-radius:8px;box-shadow:0 2px 4px 0 rgba(14,30,37,.12);padding:20px;border-bottom:1px solid rgba(14,30,37,.12)}"]}),t})();var J=n("A3yW");let K=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["app-loading"]],decls:1,vars:0,template:function(t,e){1&t&&o.Ob(0,"dt-loading-spinner")},directives:[J.b],styles:[".dt-loading-spinner-svg{stroke:#c7bb63!important}dt-loading-spinner{display:block!important;margin:auto;position:fixed;top:50%;left:50%}"],encapsulation:2}),t})();function X(t,e){if(1&t&&(o.Tb(0,"a",4),o.Tb(1,"div",5),o.Ob(2,"div",6),o.Ob(3,"div",7),o.Tb(4,"div",8),o.Tb(5,"h4"),o.Ac(6),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t){const t=e.$implicit;o.lc("routerLink","/detail/",t.id,""),o.Cb(6),o.Bc(t.name)}}function W(t,e){if(1&t&&(o.Tb(0,"div"),o.Tb(1,"div",1),o.Tb(2,"div",2),o.yc(3,X,7,2,"a",3),o.Sb(),o.Sb(),o.Ob(4,"app-hero-search"),o.Sb()),2&t){const t=o.ec();o.Cb(3),o.jc("ngForOf",t.heroes)}}function V(t,e){1&t&&(o.Tb(0,"div"),o.Ob(1,"app-loading"),o.Sb())}let Y=(()=>{class t{constructor(t,e){this.heroService=t,this.messageService=e,this.heroes=[]}ngOnInit(){const t=this.heroService.tryGetHeroesFromLocalStorage();if(t)return this.heroes=this.getRandomHeroes(t),void this.messageService.add(`Fetched ${this.heroes.reduce((t,e)=>`${t.length?t+", ":""} ${e.name}`,"")} from local storage.`);this.heroService.getHeroes().subscribe(t=>{this.heroes=this.getRandomHeroes(t),this.heroService.addHeroesToLocalStorage(t)})}getRandomHeroes(t){return t.sort(()=>.5-Math.random()).slice(0,8)}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(p),o.Nb(g))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-dashboard"]],decls:4,vars:2,consts:[[4,"ngIf"],[1,"grid","grid-pad"],[1,"row"],["class","col-1-4 mtb mtb-col details-link",3,"routerLink",4,"ngFor","ngForOf"],[1,"col-1-4","mtb","mtb-col","details-link",3,"routerLink"],[1,"borders"],[1,"corner-top"],[1,"corner-bottom"],[1,"module","hero"]],template:function(t,e){1&t&&(o.Tb(0,"h2"),o.Ac(1,"Top Heroes"),o.Sb(),o.yc(2,W,5,1,"div",0),o.yc(3,V,2,0,"div",0)),2&t&&(o.Cb(2),o.jc("ngIf",e.heroes.length),o.Cb(1),o.jc("ngIf",!e.heroes.length))},directives:[R.k,R.j,Q,c.e,K],styles:['a[_ngcontent-%COMP%]{text-decoration:none;width:175px;padding:10px;flex:1 0 auto}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]:before{box-sizing:border-box}h2[_ngcontent-%COMP%]{text-align:center}h4[_ngcontent-%COMP%]{position:relative;max-height:44px;overflow:hidden;text-overflow:ellipsis}.grid[_ngcontent-%COMP%]{margin:0}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.module[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#eee;min-height:120px;min-width:120px;border-radius:2px}.module.hero[_ngcontent-%COMP%]:hover{background-color:#022629;cursor:pointer}.module.hero[_ngcontent-%COMP%]{color:#fff;border-radius:3px;box-shadow:2px 3px 2px 0 rgba(9,130,154,.2);background:linear-gradient(#00848e,rgba(0,132,142,.69));display:flex;align-items:center;justify-content:center}.grid-pad[_ngcontent-%COMP%]{padding:10px 0}@media (max-width:600px){.module[_ngcontent-%COMP%]{font-size:11px;max-height:75px}a[_ngcontent-%COMP%]{padding:7px}}@media (min-width:601px) and (max-width:1024px){.module.hero[_ngcontent-%COMP%]{min-height:120px}}@media (max-width:1024px){.grid[_ngcontent-%COMP%]{margin:0}.module[_ngcontent-%COMP%]{min-width:60px}}.borders[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;width:100%;overflow:hidden;background:#002554}.corner-bottom[_ngcontent-%COMP%], .corner-top[_ngcontent-%COMP%]{transition:opacity .3s cubic-bezier(.695,-.03,.63,1.065),transform .3s cubic-bezier(.695,-.03,.63,1.065);position:absolute;display:block;top:10px;bottom:10px;left:10px;right:10px;opacity:0;transform:scale(.5)}a.borders[_ngcontent-%COMP%]:hover   .corner-bottom[_ngcontent-%COMP%], a.borders[_ngcontent-%COMP%]:hover   .corner-top[_ngcontent-%COMP%], a.details-link[_ngcontent-%COMP%]:hover   .corner-bottom[_ngcontent-%COMP%], a.details-link[_ngcontent-%COMP%]:hover   .corner-top[_ngcontent-%COMP%]{opacity:1;transform:scale(.95);will-change:transform,opacity}a.borders[_ngcontent-%COMP%]:hover:after, a.details-link[_ngcontent-%COMP%]:hover   .borders[_ngcontent-%COMP%]:after{opacity:0}.corner-bottom[_ngcontent-%COMP%], .corner-bottom[_ngcontent-%COMP%]:after, .corner-bottom[_ngcontent-%COMP%]:before, .corner-top[_ngcontent-%COMP%], .corner-top[_ngcontent-%COMP%]:after, .corner-top[_ngcontent-%COMP%]:before{z-index:10}.corner-bottom[_ngcontent-%COMP%]:after, .corner-bottom[_ngcontent-%COMP%]:before, .corner-top[_ngcontent-%COMP%]:after, .corner-top[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;width:13px;height:13px;border:0 solid #e9e8de}.corner-top[_ngcontent-%COMP%]:after, .corner-top[_ngcontent-%COMP%]:before{top:0;border-top-width:2px}.corner-bottom[_ngcontent-%COMP%]:after, .corner-bottom[_ngcontent-%COMP%]:before{bottom:0;border-bottom-width:2px}.corner-bottom[_ngcontent-%COMP%]:before, .corner-top[_ngcontent-%COMP%]:before{left:0;border-left-width:2px}.corner-bottom[_ngcontent-%COMP%]:after, .corner-top[_ngcontent-%COMP%]:after{right:0;border-right-width:2px}.corner-top[_ngcontent-%COMP%]:before{border-top-left-radius:0;border-top-left-radius:2px}.corner-top[_ngcontent-%COMP%]:after{border-top-right-radius:0;border-top-right-radius:2px}.corner-bottom[_ngcontent-%COMP%]:before{border-bottom-left-radius:0;border-bottom-left-radius:2px}.corner-bottom[_ngcontent-%COMP%]:after{border-bottom-right-radius:0;border-bottom-right-radius:2px}.dt-card[_ngcontent-%COMP%]{margin:0 10px}']}),t})(),q=(()=>{class t{constructor(t){this.eRef=t}loadFallbackOnError(){const t=this.eRef.nativeElement,e="https://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available";t.src=this.appFallbackimg||`${e}/landscape_xlarge.jpg`,t.srcset=this.appFallbackimages||this.getImageSrcSet(e)}getImageSrcSet(t){return`${t}/landscape_small.jpg 120w, ${t}/landscape_medium.jpg 175w, ${t}/landscape_large.jpg 190w, ${t}/landscape_xlarge.jpg 270w`}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(o.l))},t.\u0275dir=o.Ib({type:t,selectors:[["img","appFallbackimg",""]],hostBindings:function(t,e){1&t&&o.bc("error",(function(){return e.loadFallbackOnError()}))},inputs:{appFallbackimg:"appFallbackimg",appFallbackimages:"appFallbackimages"}}),t})();var Z=n("+ReA"),tt=n("/XKF");function et(t,e){if(1&t&&(o.Tb(0,"p"),o.Ac(1),o.Sb()),2&t){const t=e.$implicit;o.Cb(1),o.Bc(t.name)}}function nt(t,e){if(1&t&&(o.Tb(0,"div",4),o.Tb(1,"div",15),o.Tb(2,"div",16),o.Tb(3,"div"),o.Tb(4,"label"),o.Ac(5,"Comic series"),o.Sb(),o.yc(6,et,2,1,"p",17),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t){const t=o.ec(2);o.Cb(6),o.jc("ngForOf",t.getSeriesItems(t.hero))}}function ot(t,e){if(1&t&&(o.Tb(0,"p"),o.Ac(1),o.Sb()),2&t){const t=e.$implicit;o.Cb(1),o.Bc(t.name)}}function rt(t,e){if(1&t&&(o.Tb(0,"div",4),o.Tb(1,"div",15),o.Tb(2,"div",16),o.Tb(3,"div"),o.Tb(4,"label"),o.Ac(5,"Stories"),o.Sb(),o.yc(6,ot,2,1,"p",17),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t){const t=o.ec(2);o.Cb(6),o.jc("ngForOf",t.getStories(t.hero))}}function it(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",1),o.Tb(1,"div",2),o.Tb(2,"h2"),o.Ac(3),o.fc(4,"uppercase"),o.Sb(),o.Tb(5,"div",3),o.Tb(6,"div",4),o.Tb(7,"div",5),o.Ob(8,"img",6),o.Tb(9,"div",7),o.Tb(10,"div",8),o.Tb(11,"label",9),o.Ac(12,"ID"),o.Sb(),o.Tb(13,"p",10),o.Ac(14),o.Sb(),o.Sb(),o.Tb(15,"div",8),o.Tb(16,"label"),o.Ac(17,"Name:"),o.Sb(),o.Tb(18,"span",11),o.Ac(19),o.Sb(),o.Sb(),o.Tb(20,"div",8),o.Tb(21,"label"),o.Ac(22,"Nickname:"),o.Sb(),o.Tb(23,"em",12),o.bc("ngModelChange",(function(e){return o.sc(t),o.ec().hero.nickname=e})),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.yc(24,nt,7,1,"div",13),o.yc(25,rt,7,1,"div",13),o.Sb(),o.Sb(),o.Tb(26,"button",14),o.bc("click",(function(){return o.sc(t),o.ec().goBack()})),o.Ac(27,"Go back"),o.Sb(),o.Tb(28,"button",14),o.bc("click",(function(){return o.sc(t),o.ec().save()})),o.Ac(29,"Save"),o.Sb(),o.Sb()}if(2&t){const t=o.ec();o.Cb(3),o.Bc(o.gc(4,9,t.hero.name)),o.Cb(5),o.kc("src",t.getImageSrc(),o.tc),o.kc("srcset",t.getImageSrcSet(),o.tc),o.kc("alt",t.hero.name),o.Cb(6),o.Bc(t.hero.id),o.Cb(5),o.Bc(t.hero.name),o.Cb(4),o.jc("ngModel",t.hero.nickname),o.Cb(1),o.jc("ngIf",t.getSeriesItems(t.hero)),o.Cb(1),o.jc("ngIf",t.getStories(t.hero))}}const at=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"heroes",component:N},{path:"dashboard",component:Y},{path:"detail/:id",component:(()=>{class t{constructor(t,e,n){this.route=t,this.heroService=e,this.location=n}ngOnInit(){this.hero||this.getHero(),this.hero.nickname||(this.hero.nickname=this.hero.name)}getHero(){const t=+this.route.snapshot.paramMap.get("id");this.hero=this.heroService.tryGetHeroLocally(t)||null,this.hero||this.heroService.getHero(t).subscribe(t=>this.hero=t)}goBack(){this.location.back()}save(){this.heroService.updateLocalHero(this.hero)}getImageSrc(){return`${this.getPathWithHttps()}/landscape_xlarge.jpg`}getImageSrcSet(){const t=this.getPathWithHttps();return`${t}/landscape_small.jpg 120w, ${t}/landscape_medium.jpg 175w, ${t}/landscape_large.jpg 190w, ${t}/landscape_xlarge.jpg 270w`}getPathWithHttps(){return this.hero.thumbnail.path.indexOf("https")>=0?this.hero.thumbnail.path:this.hero.thumbnail.path.replace("http","https")}getSeriesItems(t){return t.series.available>0?t.series.items:null}getStories(t){return t.stories.available>0?t.stories.items:null}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(c.a),o.Nb(p),o.Nb(R.g))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-hero-detail"]],inputs:{hero:"hero"},decls:1,vars:1,consts:[["class","details__wrapper",4,"ngIf"],[1,"details__wrapper"],[1,"details"],[1,"details_container"],[1,"info_container"],[1,"info"],["height","200px","appFallbackimg","",3,"src","srcset","alt"],[1,"info_text_container"],[1,"info_row"],[1,"hero_label"],[1,"hero_id"],["aria-label","Name"],["dt-inline-editor","","ariaLabelSave","Save nickname","ariaLabelCancel","Cancel and discard changes",3,"ngModel","ngModelChange"],["class","info_container",4,"ngIf"],["dt-button","",3,"click"],[1,"items"],[1,"items_text_container"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&o.yc(0,it,30,11,"div",0),2&t&&o.jc("ngIf",e.hero)},directives:[R.k,q,Z.a,i.e,i.g,tt.a,R.j],pipes:[R.o],styles:["h2[_ngcontent-%COMP%]{text-align:center}label[_ngcontent-%COMP%]{display:inline-block;color:#607d8b;font-weight:700}input[_ngcontent-%COMP%]{height:2em;font-size:1em;padding-left:.4em;margin-top:5px}button[_ngcontent-%COMP%]{margin-top:10px;background-color:#eee;border:none;border-radius:4px;cursor:pointer;cursor:hand}button[_ngcontent-%COMP%]:hover{background-color:#cfd8dc}button[_ngcontent-%COMP%]:disabled{background-color:#eee;color:#ccc;cursor:auto}.dt-button[_ngcontent-%COMP%] + .dt-button[_ngcontent-%COMP%]{margin-left:8px}.info_row[_ngcontent-%COMP%]{display:flex;margin:auto;flex-direction:column}@media (min-width:578px){img[_ngcontent-%COMP%]{float:right}}.details__wrapper[_ngcontent-%COMP%]{margin:0 10px}@media (max-width:577px){img[_ngcontent-%COMP%]{display:flex;margin:10px auto auto;box-shadow:2px 2px 2px #d3d3d3}details[_ngcontent-%COMP%]{overflow:hidden}}.details_container[_ngcontent-%COMP%]{box-shadow:0 0 10px rgba(14,30,37,.12)}.info_container[_ngcontent-%COMP%]{display:grid;background-color:#fff}.details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{grid-column:1;border:1px solid #e1e1e1}.items[_ngcontent-%COMP%]{border-bottom:1px solid #e1e1e1;border-left:1px solid #e1e1e1;border-right:1px solid #e1e1e1}.hero_id_label[_ngcontent-%COMP%]{font-size:13px;line-height:20px;letter-spacing:1px;text-transform:uppercase;margin:0;padding:0}.hero_id[_ngcontent-%COMP%], .hero_id_label[_ngcontent-%COMP%]{font-family:Roboto,Trebuchet MS,Helvetica,Arial,sans-serif;font-weight:700}.hero_id[_ngcontent-%COMP%]{color:#151515;font-size:16px;word-break:break-word}.hero_label[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0;padding:0}.info_text_container[_ngcontent-%COMP%]{padding-left:2em;padding-top:2em}.items_text_container[_ngcontent-%COMP%]{padding:2em}.items_text_container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-bottom:10px}em[_ngcontent-%COMP%]{width:90%;margin-bottom:10px}"]}),t})()}];let ct=(()=>{class t{}return t.\u0275mod=o.Lb({type:t}),t.\u0275inj=o.Kb({factory:function(e){return new(e||t)},imports:[[c.f.forRoot(at,{scrollPositionRestoration:"top",useHash:!0})],c.f]}),t})();function st(t,e){if(1&t&&(o.Tb(0,"div",5),o.Tb(1,"span",6),o.Ac(2),o.Sb(),o.Sb()),2&t){const t=e.$implicit;o.Cb(2),o.Bc(t)}}function lt(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",1),o.Tb(1,"dt-card"),o.Tb(2,"dt-card-title"),o.Ac(3," Messages "),o.Sb(),o.Tb(4,"button",2),o.bc("click",(function(){return o.sc(t),o.ec().messageService.clear()})),o.Ob(5,"dt-icon",3),o.Ac(6,"Clear "),o.Sb(),o.yc(7,st,3,1,"div",4),o.Sb(),o.Sb()}if(2&t){const t=o.ec();o.Cb(7),o.jc("ngForOf",t.messageService.messages)}}let dt=(()=>{class t{constructor(t){this.messageService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(g))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-messages"]],decls:1,vars:1,consts:[["class","dt-demo-card",4,"ngIf"],[1,"dt-demo-card"],["dt-button","","variant","secondary",1,"clear",3,"click"],["name","delete"],["class","messages",4,"ngFor","ngForOf"],[1,"messages"],[1,"message"]],template:function(t,e){1&t&&o.yc(0,lt,8,1,"div",0),2&t&&o.jc("ngIf",e.messageService.messages.length)},directives:[R.k,E.a,E.c,tt.a,_.a,R.j],styles:["dt-card-title[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{color:#00848e;font-family:Arial,Helvetica,sans-serif;font-weight:lighter}body[_ngcontent-%COMP%]{margin:2em}body[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[text][_ngcontent-%COMP%]{color:#dc143c;font-family:Cambria,Georgia}button.clear[_ngcontent-%COMP%]{font-family:Arial;background-color:#eee;border:none;border-radius:4px;cursor:pointer;cursor:hand}button[_ngcontent-%COMP%]:hover{background-color:#cfd8dc}button[_ngcontent-%COMP%]:disabled{background-color:#eee;color:#aaa;cursor:auto}button.clear[_ngcontent-%COMP%]{color:#333;margin:12px 0}.dt-card[_ngcontent-%COMP%]{border-top:4px solid #00848e;border-radius:8px;box-shadow:0 2px 4px 0 rgba(14,30,37,.12);margin-top:20px;padding:20px;border-bottom:1px solid rgba(14,30,37,.12)}"]}),t})(),bt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["app-attribution"]],decls:5,vars:0,consts:[["href","https://marvel.com"]],template:function(t,e){1&t&&(o.Tb(0,"p"),o.Ac(1,"Data provided by "),o.Tb(2,"a",0),o.Ac(3,"Marvel"),o.Sb(),o.Ac(4,". \xa9 2020 Marvel"),o.Sb())},styles:["p[_ngcontent-%COMP%]{color:grey;font-size:11px;text-align:center}a[_ngcontent-%COMP%]{text-decoration:none;color:#00848e}"]}),t})(),gt=(()=>{class t{constructor(){this.title="Marvel Heroes"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["app-root"]],decls:13,vars:3,consts:[[1,"container"],["type","button","routerLink","/dashboard","routerLinkActive","active",1,"button-item"],["type","button","routerLink","/heroes","routerLinkActive","active",1,"button-item"]],template:function(t,e){1&t&&(o.Tb(0,"header"),o.Tb(1,"h1"),o.Ac(2),o.fc(3,"uppercase"),o.Sb(),o.Sb(),o.Tb(4,"div",0),o.Tb(5,"nav"),o.Tb(6,"button",1),o.Ac(7,"Dashboard"),o.Sb(),o.Tb(8,"button",2),o.Ac(9,"Heroes"),o.Sb(),o.Sb(),o.Ob(10,"router-outlet"),o.Ob(11,"app-messages"),o.Ob(12,"app-attribution"),o.Sb()),2&t&&(o.Cb(2),o.Bc(o.gc(3,1,e.title)))},directives:[c.c,c.d,c.g,dt,bt],pipes:[R.o],styles:["h1[_ngcontent-%COMP%]{font-size:1.5em;font-weight:500;margin:auto}h2[_ngcontent-%COMP%]{font-size:2em;margin-top:0;padding-top:0}.container[_ngcontent-%COMP%]{max-width:700px;margin:auto}header[_ngcontent-%COMP%]{background-color:#222831;text-align:left}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:25px;color:#fff;letter-spacing:10px}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]{text-align:center}nav[_ngcontent-%COMP%]{margin:30px 0}a[_ngcontent-%COMP%]:link, nav[_ngcontent-%COMP%]   .button-item[_ngcontent-%COMP%]:link, nav[_ngcontent-%COMP%]   .button-item[_ngcontent-%COMP%]:visited, nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#334953}nav[_ngcontent-%COMP%]   .button-item[_ngcontent-%COMP%]:hover, nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;background:#00848e;border-color:#00848e}.button-item.active[_ngcontent-%COMP%]{z-index:1;position:relative;color:#006d75;background-color:#f8f8f8;border-color:#006d75}"]}),t})();var ht=n("R1ws"),pt=n("3ydp"),ut=n("J6Yu");let mt=(()=>{class t{}return t.\u0275mod=o.Lb({type:t,bootstrap:[gt]}),t.\u0275inj=o.Kb({factory:function(e){return new(e||t)},providers:[],imports:[[r.a,ct,_.b.forRoot({svgIconLocation:"/assets/icons/{{name}}.svg"}),tt.b,pt.d,C.b,a.b,i.b,i.h,ht.a,ut.a,E.b,Z.b,J.a,m.b,h.b,f.n]]}),t})();r.b().bootstrapModule(mt).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0,4]]]);